/*! mcmmmska 2018-12-31 */

define(["jquery","jqueryui"],function(s,e){return{init:function(){s(document).ready(function(){$i=0,$name=[],$email=[],$date=[new Date],$now=[new Date],$duration=[0],$active=[],$x=[0],$y=[0],$ip_address=[],s.getJSON("https://api.ipify.org?format=jsonp&callback=?",function(e){$ip_address[$i]=e.ip}),$current_url=[];var i=!($samplingmode=[]);$leftclick=[!1],$rightclick=[!1],$middleclick=[!1],$keyboardtype=[];var c,o,e,a=0,t=0;function $(){s(window).off(),s("#logging").is(":checked")?s("#sampling-rate-mode-checkbox").is(":checked")?e=setInterval(function(){i&&(l(),$i+=1,s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),i=!1),s("#mouseclick").is(":checked")&&s(window).mousedown(function(e){switch(i=!0,d(),$x[$i]=e.pageX,$y[$i]=e.pageY,e.which){case 1:$leftclick[$i]=!0,c="left";break;case 2:$middleclick[$i]=!0,c="middle";break;case 3:$rightclick[$i]=!0,c="right";break;default:console.log("You have a strange Mouse!")}}).mouseup(function(e){$i+=1,d(),c="no click",$leftclick[$i]=!1,$middleclick[$i]=!1,$rightclick[$i]=!1,s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}),s("#mousemove").is(":checked")&&s(window).mousemove(function(e){i=!0,d(),$x[$i]=e.pageX,$y[$i]=e.pageY}),s("#mousescroll").is(":checked")&&s(window).scroll(function(e){i=!0,d(),Number.isInteger($x[$i])&&Number.isInteger($y[$i])&&(a!=s(document).scrollLeft()&&($x[$i]-=a,a=s(document).scrollLeft(),$x[$i]+=a),t!=s(document).scrollTop()&&($y[$i]-=t,t=s(document).scrollTop(),$y[$i]+=t)),$scrollleft[$i]=s(document).scrollLeft(),$scrolltop[$i]=s(document).scrollTop()}),s("#keyboardpress").is(":checked")&&"null null"!==s("#name").val()&&s(window).keypress(function(e){i=!0,d(),$keyboardtype[$i]+=e.key,o=e.key}),s("#tabstatus-checkbox").is(":checked")&&s(window).mouseenter(function(){$i+=1,d(),s("#active").text("active"),s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}).on("pageshow",function(){$i+=1,d(),s("#active").text("active"),s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}).mouseleave(function(){$i+=1,d(),s("#active").text("inactive"),s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}).on("pagehide",function(){$i+=1,d(),s("#active").text("inactive"),s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}),s("#zoom").is(":checked")&&s(window).resize(function(){$i+=1,d(),$zoom[$i]=100*screen.width/window.innerWidth,s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}),s(window).on("touchstart",function(e){$i+=1,d(),$mTouch[$i]="touched",$x[$i]=e.touches[0].pageX,$y[$i]=e.touches[0].pageY,s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}).on("touchend",function(e){$i+=1,d(),$mTouch[$i]="untouched",s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}).on("touchcancel",function(e){$i+=1,d(),$mTouch[$i]="interrupted",$x[$i]=e.touches[0].pageX,$y[$i]=e.touches[0].pageY,s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}).on("touchmove",function(e){$i+=1,d(),$mTouch[$i]="moving",$x[$i]=e.touches[0].pageX,$y[$i]=e.touches[0].pageY,s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()})},1e3/s("#sampling-rate").val()):(clearTimeout(e),s("#mouseclick").is(":checked")&&s(window).mousedown(function(e){switch($i+=1,d(),$x[$i]=e.pageX,$y[$i]=e.pageY,e.which){case 1:$leftclick[$i]=!0,c="left click";break;case 2:$middleclick[$i]=!0,c="middle click";break;case 3:$rightclick[$i]=!0,c="right click";break;default:console.log("You have a strange Mouse!")}s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}).mouseup(function(e){$i+=1,d(),c="no click",$leftclick[$i]=!1,$middleclick[$i]=!1,$rightclick[$i]=!1,s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}),s("#mousemove").is(":checked")&&s(window).mousemove(function(e){$i+=1,d(),$x[$i]=e.pageX,$y[$i]=e.pageY,s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}),s("#mousescroll").is(":checked")&&s(window).scroll(function(e){$i+=1,d(),Number.isInteger($x[$i])&&Number.isInteger($y[$i])&&(a!=s(document).scrollLeft()&&($x[$i]-=a,a=s(document).scrollLeft(),$x[$i]+=a),t!=s(document).scrollTop()&&($y[$i]-=t,t=s(document).scrollTop(),$y[$i]+=t)),$scrollleft[$i]=s(document).scrollLeft(),$scrolltop[$i]=s(document).scrollTop(),s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}),s("#keyboardpress").is(":checked")&&"null null"!==s("#name").val()&&s(window).keypress(function(e){$i+=1,d(),$keyboardtype[$i]+=e.key,o=e.key,s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}),s("#tabstatus-checkbox").is(":checked")&&s(window).mouseenter(function(){$i+=1,d(),s("#active").text("active"),s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}).on("pageshow",function(){$i+=1,d(),s("#active").text("active"),s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}).mouseleave(function(){$i+=1,d(),s("#active").text("inactive"),s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}).on("pagehide",function(){$i+=1,d(),s("#active").text("inactive"),s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}),s("#zoom").is(":checked")&&s(window).resize(function(){$i+=1,d(),$zoom[$i]=100*screen.width/window.innerWidth,s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}),s(window).on("touchstart",function(e){$i+=1,d(),$mTouch[$i]="touched",$x[$i]=e.touches[0].pageX,$y[$i]=e.touches[0].pageY,s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}).on("touchend",function(e){$i+=1,d(),$mTouch[$i]="untouched",s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}).on("touchcancel",function(e){$i+=1,d(),$mTouch[$i]="interrupted",$x[$i]=e.touches[0].pageX,$y[$i]=e.touches[0].pageY,s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()}).on("touchmove",function(e){$i+=1,d(),$mTouch[$i]="moving",$x[$i]=e.touches[0].pageX,$y[$i]=e.touches[0].pageY,s("#data-to-database-on-fly-checkbox").is(":checked")&&n(s("#data-to-database-on-fly").val()),l()})):s(window).off()}function d(){s("#mouseclick").is(":checked")?($leftclick[$i]=$leftclick[$i-1],$rightclick[$i]=$rightclick[$i-1],$middleclick[$i]=$middleclick[$i-1]):($leftclick[$i]="disabled",$rightclick[$i]="disabled",$middleclick[$i]="disabled"),s("#touch").is(":checked")?$mTouch[$i]=$mTouch[$i-1]:$mTouch[$i]="disabled",s("#mousemove").is(":checked")||s("#touchmove").is(":checked")?($x[$i]=$x[$i-1],$y[$i]=$y[$i-1]):($x[$i]="disabled",$y[$i]="disabled"),s("#mousescroll").is(":checked")?($scrollleft[$i]=$scrollleft[$i-1],$scrolltop[$i]=$scrolltop[$i-1]):($scrollleft[$i]="disabled",$scrolltop[$i]="disabled"),s("#keyboardpress").is(":checked")?$keyboardtype[$i]="":$keyboardtype[$i]="disabled",s("#tabstatus-checkbox").is(":checked")?$active[$i]=s("#active").text():$active[$i]="disabled",s("#name-checkbox").is(":checked")&&"null null"!==s("#name").val()?$name[$i]=s("#name").val():$name[$i]="anonymous",s("#email-checkbox").is(":checked")&&"null"!==s("#email").val()?$email[$i]=s("#email").val():$email[$i]="anonymous",s("#windowsize-checkbox").is(":checked")?($windowwidth[$i]=window.innerWidth,$windowheight[$i]=window.innerHeight):($windowwidth[$i]="disabled",$windowheight[$i]="disabled"),s("#screensize-checkbox").is(":checked")?($screenwidth[$i]=screen.width,$screenheight[$i]=screen.height):($screenwidth[$i]="disabled",$screenheight[$i]="disabled"),s("#zoom").is(":checked")?$zoom[$i]=100*screen.width/window.innerWidth:$zoom[$i]="disabled",s("#currenturl-checkbox").is(":checked")?$current_url[$i]=window.location.href:$current_url[$i]="disabled",$samplingmode[$i]=s("#sampling-rate-mode-checkbox").prop("checked"),$restrictedfocusviewer[$i]=s("#restricted-focus-viewer-imitation-checkbox").prop("checked"),$bubbleview[$i]=s("#bubble-view-imitation-checkbox").prop("checked"),$fingertracinglearningsystem[$i]=s("#finger-tracing-learning-system-imitation-checkbox").prop("checked"),$cursorreminder[$i]=s("#cursor-reminder").val(),$transparency[$i]=s("#transparency-control").val()/100,$magnifier[$i]=s("#fontsize-magnifier").val(),s("#color-checkbox").prop("checked")&&($textcolor[$i]=s("#color").val()),s("#background-color-checkbox").prop("checked")&&($backgroundcolor[$i]=s("#background-color").val()),s("#ipaddress-checkbox").is(":checked")?(s.getJSON("https://api.ipify.org?format=jsonp&callback=?",function(e){$ip_address[$i]=e.ip}),null==$ip_address[$i]&&($ip_address[$i]=$ip_address[$i-1])):$ip_address[$i]="disabled",s("#date-checkbox").is(":checked")?$date[$i]=new Date:$date[$i]="disabled",$now[$i]=new Date,s("#duration-checkbox").is(":checked")?$duration[$i]=($now[$i]-$now[$i-1])/1e3:$duration[$i]="disabled"}function n(e){var i={};i.$file=String($name[1]).replace(" ","")+String($now[1]).replace(":",".").replace(" ","")+".json","anonymous"!=$name[$i]&&(i.$name=$name[$i]),"anonymous"!=$email[$i]&&(i.$email=$email[$i]),"disabled"!=$date[$i]&&(i.$date=$date[$i]),"disabled"!=$x[$i]&&(i.$x=$x[$i]),"disabled"!=$y[$i]&&(i.$y=$y[$i]),"disabled"!=$active[$i]&&(i.$active=$active[$i]),"disabled"!=$duration[$i]&&(i.$duration=$duration[$i]),"disabled"!=$current_url[$i]&&(i.$current_url=$current_url[$i]),"disabled"!=$ip_address[$i]&&(i.$ip_address=$ip_address[$i]),"disabled"!=$samplingmode[$i]&&(i.$samplingmode=$samplingmode[$i]),"disabled"!=$leftclick[$i]&&(i.$leftclick=$leftclick[$i]),"disabled"!=$rightclick[$i]&&(i.$rightclick=$rightclick[$i]),"disabled"!=$middleclick[$i]&&(i.$middleclick=$middleclick[$i]),"disabled"!=$mTouch[$i]&&(i.$mTouch=$mTouch[$i]),"disabled"!=$keyboardtype[$i]&&(i.$keyboardtype=$keyboardtype[$i]),"disabled"!=$scrollleft[$i]&&(i.$scrollleft=$scrollleft[$i]),"disabled"!=$scrolltop[$i]&&(i.$scrolltop=$scrolltop[$i]),"disabled"!=$windowwidth[$i]&&(i.$windowwidth=$windowwidth[$i]),"disabled"!=$windowheight[$i]&&(i.$windowheight=$windowheight[$i]),"disabled"!=$screenwidth[$i]&&(i.$screenwidth=$screenwidth[$i]),"disabled"!=$screenheight[$i]&&(i.$screenheight=$screenheight[$i]),"disabled"!=$zoom[$i]&&(i.$zoom=$zoom[$i]),$restrictedfocusviewer[$i]&&(i.$restrictedfocusviewer=$restrictedfocusviewer[$i]),$bubbleview[$i]&&(i.$bubbleview=$bubbleview[$i]),$fingertracinglearningsystem[$i]&&(i.$fingertracinglearningsystem=$fingertracinglearningsystem[$i]),0!=$cursorreminder[$i]&&(i.$cursorreminder=$cursorreminder[$i]),100!=$transparency[$i]&&(i.$transparency=$transparency[$i]),1!=$magnifier[$i]&&(i.$magnifier=$magnifier[$i]),null!=$textcolor[$i]&&(i.$textcolor=$textcolor[$i]),null!=$backgroundcolor[$i]&&(i.$backgroundcolor=$backgroundcolor[$i]),s.post(e,i,function(e,i){console.log(e),console.log(i)})}function l(){s("#demo-checkbox").is(":checked")?s("#demo").html("<strong>MouseX</strong>: "+$x[$i]+" ,<strong>MouseY</strong>: "+$y[$i]+" ,<strong>ScrollLeft</strong>: "+$scrollleft[$i]+" ,<strong>ScrollTop</strong>: "+$scrolltop[$i]+" ,<strong>KeyboardPress</strong>: "+o+" ,<strong>MouseClick</strong>: "+c+" ,<strong>Touch</strong>: "+$mTouch[$i]+" ,<strong>Zoom</strong>: "+$zoom[$i]+"%").css("display","block"):s("#demo").css("display","none")}$scrollleft=[0],$scrolltop=[0],$windowwidth=[window.innerWidth],$windowheight=[window.innerHeight],$screenwidth=[screen.width],$screenheight=[screen.height],$zoom=[100*screen.width/window.innerWidth],$mTouch=[],$restrictedfocusviewer=[],$bubbleview=[],$fingertracinglearningsystem=[],$cursorreminder=[],$transparency=[],$magnifier=[],$textcolor=[],$backgroundcolor=[],s("#logging, #mouseclick, #mousemove, #mousescroll, #keyboardpress, #sampling-rate-mode-checkbox, #data-to-file-on-fly-checkbox, #data-to-database-on-fly-checkbox").click(function(){$()}).ready(function(){$()}),s("#demo-checkbox").click(function(){l()}).ready(function(){l()})}).on("beforeunload",function(){s("#data-to-file-on-fly-checkbox").is(":checked")&&post_data_fly(s("#file-server-scrip").val())})}}});
